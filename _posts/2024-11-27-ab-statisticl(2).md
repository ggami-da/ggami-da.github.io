---
layout: post
title:  "[AB Test] p-value"
date:   2024-11-27
last_modified_at: 2024-11-27
categories: [AB Test, Statistic]
tags: [Casual Inference, Data]
---

{: .box-success}
주로 분석할 때 많이 사용하는 이론을 간략히 정리합니다.

# **P-값의 올바른 해석과 베이즈 정리를 통한 이해**

P-값은 통계학에서 광범위하게 사용되는 개념이지만, 그 해석이 종종 잘못 이해되곤 합니다.  
일반적으로 P-값은 "관찰된 데이터가 주어졌을 때 귀무 가설이 참일 확률"로 오해되지만, 실제로는 그렇지 않습니다.

---

### **P-값의 올바른 정의**

**P-값**은 **귀무 가설이 참이라는 전제 하에**, 현재 관찰된 데이터 또는 그보다 더 극단적인 결과가 나타날 확률을 의미합니다. 즉, 다음과 같이 표현됩니다:

$$
P(데이터 | H_0 참)
$$

여기서 $$H_0$$는 귀무 가설을 나타냅니다.

---

### **일반적인 오해**

많은 사람들이 P-값을 다음과 같이 잘못 해석합니다:

$$
P(H_0 참 | 데이터)
$$

이는 **관찰된 데이터가 주어졌을 때 귀무 가설이 참일 확률**로, 우리가 실제로 알고 싶은 값입니다. 그러나 P-값은 이 확률을 직접적으로 제공하지 않습니다.

---

### **베이즈 정리를 통한 관계 이해**

두 확률 간의 관계를 이해하기 위해 **베이즈 정리**를 적용할 수 있습니다:

$$
P(H_0\ \text{참} \mid \text{데이터}) = \frac{P(\text{데이터} \mid H_0\ \text{참}) \times P(H_0\ \text{참})}{P(\text{데이터})}
$$

- $$P(H_0 참 | 데이터)$$: 데이터가 주어졌을 때 귀무 가설이 참일 확률 (우리가 알고 싶은 값)
- $$P(데이터 | H_0 참)$$: 귀무 가설이 참일 때 관찰된 데이터가 나타날 확률 (P-값)
- $$P(H_0 참)$$: 귀무 가설이 참일 사전 확률
- $$P(데이터)$$: 데이터가 관찰될 전체 확률
---

### **해석의 차이점**

- **P-값**은 로, 귀무 가설이 참일 때 현재 데이터가 나타날 확률입니다.
    
    $$P(데이터| H_0 참)$$
    
- 우리가 알고 싶은 **귀무 가설의 사후 확률**은 로, 데이터가 주어졌을 때 귀무 가설이 참일 확률입니다.
    
    $$P(H_0 참 | 데이터)$$
    

이 둘은 베이즈 정리에 의해 연결되지만, 귀무 가설의 사전 확률 $$P(H_0 참)$$과 전체 데이터의 확률 $$P(데이터)$$를 알아야 정확한 값을 계산할 수 있습니다. 그러나 실제 연구에서는 이 값들을 정확히 알기 어렵기 때문에, P-값을 귀무 가설의 사후 확률로 직접 해석하는 것은 부적절합니다.

---

### **우도의 필요성**

베이즈 정리를 통해 $$P(H_0 참∣데이터)$$를 계산하려면, 다음과 같은 **우도(likelihood)** 정보가 필요합니다:

$$ 
P(데이터 | H_1 참)
$$

여기서 $$H_1$$은 대립 가설을 나타냅니다. 이 값은 대립 가설이 참일 때 관찰된 데이터가 나타날 확률로, 이를 알기 위해서는 대립 가설 하에서의 분포나 모델에 대한 정보가 필요합니다. 따라서 우도가 필요한데, 이는 단순히 P-값만으로는 구할 수 없습니다.

---

### **신뢰 구간을 통한 이해**

신뢰 구간은 추정된 모수의 범위를 제공하여 효과의 유의성과 크기를 더욱 직관적으로 이해할 수 있게 합니다. **95% 신뢰 구간**은 반복적인 실험에서 95%의 확률로 참된 모수가 그 범위 내에 포함됨을 의미합니다.

- **신뢰 구간에 0이 포함되지 않으면**: 효과가 통계적으로 유의하다고 볼 수 있습니다.
- **신뢰 구간이 넓으면**: 데이터의 변동성이 크거나 표본 크기가 작아 추정의 불확실성이 높다는 것을 나타냅니다.

신뢰 구간을 살펴보면 P-값보다 결과의 통계적 및 실질적 유의성을 더 명확하게 파악할 수 있습니다.

---

### **결론**

- **P-값은** 귀무 가설이 참일 때 현재 데이터가 나타날 확률이며, 이를 **귀무 가설이 참일 확률로 직접 해석하면 안 됩니다**.
- **베이즈 정리**를 적용하면 귀무 가설의 사후 확률을 계산할 수 있지만, 이는 우도와 사전 확률 등의 추가 정보가 필요합니다.
- 따라서 P-값을 해석할 때는 그 한계를 인지하고, **신뢰 구간**과 함께 고려하여 결과를 종합적으로 판단하는 것이 중요합니다.

---

**참고 문헌**

- **Trustworthy Online Controlled Experiments**